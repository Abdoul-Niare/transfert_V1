{% extends 'base.html.twig' %}

{% block title %}Liste des transferts
{% endblock %}

{% block body %}

	<div class="container-fluid">
		{% if is_granted('ROLE_PARTNER')%}
			<h2 class="text-stard m-4">Liste des transferts</h2>
		{% elseif is_granted('ROLE_USER') %}
			<h2 class="text-stard m-4">Historique</h2>
		{% endif %}

		<table class="container-fluid">
			<thead>
				<tr>
					<th>Transfert</th>
					<th>Status</th>
					{# <th>CodeSecret</th> #}
					<th>Montant transfert</th>
					<th>Montant bénéficiaire</th>
					{% if is_granted('ROLE_ADMIN')%}
						<th>Frais du transfert</th>
					{% endif %}
					{# <th>ComTransfert</th> #}
					<th>Commission Agent</th>
					<th>Nom bénéficiaire</th>
					{# <th>N° pièce bénéficiaire</th> #}
					{# <th>Tel bénéficiaire</th> #}
					<th>Date d'envoi</th>
					<th>Date pris charge</th>
					<th>Date livraison</th>
					<th>Is_visible</th>
					<th>actions</th>
				</tr>
			</thead>

			<tbody>
				{% for transfert in transferts %}
					<tr>
						<td>{{ transfert.id }}</td>
						<td>{{ transfert.statut }}</td>
						{# <td>{{ transfert.codeSecret }}</td> #}
						<td>{{ transfert.montTransfert }}</td>
						<td>{{ transfert.montBenef }}</td>
						{% if is_granted('ROLE_ADMIN')%}
							<td>{{ transfert.fraisTransfert }}</td>
						{% endif %}
						{# <td>{{ transfert.comTransfert }}</td> #}
						<td>{{ transfert.comAgentLivreur }}</td>
						<td>{{ transfert.nomBenef }}</td>
						{# <td>{{ transfert.numBenef }}</td> #}
						{# <td>{{ transfert.numTelBenef }}</td> #}
						<td>{{ transfert.dateEnvoi ? transfert.dateEnvoi|date('Y-m-d H:i:s') : '' }}</td>
						<td>{{ transfert.datePrisCharge ? transfert.datePrisCharge|date('Y-m-d H:i:s') : '' }}</td>
						<td>{{ transfert.dateLivr ? transfert.dateLivr|date('Y-m-d H:i:s') : '' }}</td>
						<td>{{ transfert.isVisible ? 'Yes' : 'No' }}</td>
						<td>
							<a class="btn btn-primary p-1 m-1" href="{{ path('app_transfert_show', {'id': transfert.id}) }}">Afficher</a>
							{% if is_granted('ROLE_ADMIN') and (transfert.dateLivr == null) %}
								<a class="btn btn-warning p-1 m-1" href="{{ path('app_transfert_edit', {'id': transfert.id}) }}">Modifier</a>
							{% endif %}
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="16">Pas de transfert disponible pour l'instant</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<div class="container-fluid text-center mt-3">
			<a class="btn btn-success" href="{{ path('app_transfert_new') }}">Créer un New Transfert</a>
		</div>


	</div>
{% endblock %}
